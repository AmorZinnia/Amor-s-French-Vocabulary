<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Review</title>
<style>
body{font-family:Arial;padding:20px;background:#f5f5f5}
.card{background:white;padding:15px;margin:10px;border-radius:12px}
button{margin:5px;padding:8px 12px;border-radius:8px;border:none}
.good{background:#9be7a1}
.ok{background:#ffe08a}
.bad{background:#ff9e9e}
.easy{background:#8ad4ff}
</style>
</head>

<body>

<h2>Review Planner</h2>

<input id="name" placeholder="Project">
<input type="date" id="date">
<button onclick="add()">Add</button>

<h3>Today's Reviews</h3>
<div id="today"></div>

<script>
let schedule=[0,1,2,3,5,7,10,15,30]
let data=JSON.parse(localStorage.getItem("rev")||"[]")

function add(){
let name=document.getElementById("name").value
let date=document.getElementById("date").value
data.push({name:name,start:date,stage:0})
save()
render()
}

function save(){
localStorage.setItem("rev",JSON.stringify(data))
}

function render(){
let t=new Date().toISOString().slice(0,10)
let div=document.getElementById("today")
div.innerHTML=""

data.forEach((x,i)=>{
let d=new Date(x.start)
d.setDate(d.getDate()+schedule[x.stage])
let due=d.toISOString().slice(0,10)

if(due==t){
div.innerHTML+=`
<div class="card">
<b>${x.name}</b><br>
<button class="bad" onclick="rate(${i},0)">不会</button>
<button class="ok" onclick="rate(${i},1)">模糊</button>
<button class="good" onclick="rate(${i},2)">会</button>
<button class="easy" onclick="rate(${i},3)">简单</button>
</div>`
}
})
}

function rate(i,type){
if(type==0)data[i].stage=0
else data[i].stage++
save()
render()
}

render()
</script>

</body>
</html>
